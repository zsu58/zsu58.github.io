I"Y<hr />
<h3 id="hadoop-installation-on-localmac">Hadoop Installation on Local(Mac)</h3>
<ul>
  <li>Hadoop Installation</li>
  <li>í™˜ê²½ë³€ìˆ˜ ì„¤ì •</li>
  <li>ì‚¬ì „ ì¤€ë¹„</li>
  <li>Hadoop ì‹¤í–‰</li>
  <li>MapReduce ì‹¤í–‰</li>
</ul>

<hr />

<h3 id="hadoop-installation">Hadoop Installation</h3>
<ul>
  <li>ì„¤ì¹˜í™˜ê²½
    <ul>
      <li>OS: macOS Big Sur 11.6</li>
      <li>Hadoop: 3.3.1</li>
    </ul>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>hadoop

<span class="c"># hadoopì€ openjdkì— dependencyê°€ ì¡´ì¬í•˜ê¸°ì— hadoop ì„¤ì¹˜ì‹œ ìë™ìœ¼ë¡œ ì„¤ì¹˜ë¨</span>
<span class="c"># ë§Œì•½ ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ openjdkê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° ì œê±° ê°€ëŠ¥</span>
</code></pre></div></div>

<h3 id="í™˜ê²½ë³€ìˆ˜-ì„¤ì •">í™˜ê²½ë³€ìˆ˜ ì„¤ì •</h3>
<ul>
  <li>directory: /usr/local/Cellar/hadoop/3.3.1/libexec/etc/hadoop</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># hadoop-env.sh (ë§¨ ì•„ë˜ì— ì¶”ê°€)</span>
<span class="nb">export </span><span class="nv">HADOOP_OPTS</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HADOOP_OPTS</span><span class="s2"> -Djava.net.preferIPv4Stack=true -Djava.security.krb5.realm= -Djava.security.krb5.kdc="</span>
<span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span><span class="s2">"/Library/Java/JavaVirtualMachines/jdk-13.0.1.jdk/Contents/Home"</span>

<span class="c"># core-site.xml (configurationì— property ì¶”ê°€)</span>
&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;/usr/local/Cellar/hadoop/hdfs/tmp&lt;/value&gt;
        &lt;description&gt;A base <span class="k">for </span>other temporary directories.&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;fs.default.name&lt;/name&gt;
        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;

<span class="c"># hdfs-site.xml (configurationì— property ì¶”ê°€)</span>
&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.replication&lt;/name&gt;
    &lt;value&gt;1&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;

<span class="c"># mapred-site.xml</span>
&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
    &lt;value&gt;yarn&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;   
    &lt;value&gt;<span class="nv">$HADOOP_MAPRED_HOME</span>/share/hadoop/mapreduce/<span class="k">*</span>:<span class="nv">$HADOOP_MAPRED_HOME</span>/share/hadoop/mapreduce/lib/<span class="k">*</span>&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;

<span class="c"># yarn-site.xml</span>
&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
    &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;
    &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</code></pre></div></div>

<h3 id="ì‚¬ì „-ì¤€ë¹„">ì‚¬ì „ ì¤€ë¹„</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥</span>
ssh localhost
<span class="c"># ë§Œì•½ ì ‘ì†ì‹œê°„ì´ ì•ˆëœ¨ê³  Connection refused ë¼ê³  ëœ¨ë©´, ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥</span>
ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-P</span> <span class="s1">''</span> <span class="nt">-f</span> ~/.ssh/id_rsa
<span class="nb">cat</span> ~/.ssh/id_rsa.pub <span class="o">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="nb">chmod </span>0600 ~/.ssh/authorized_keys

<span class="c"># ë””ë ‰í† ë¦¬ ë³€ê²½</span>
<span class="nb">cd</span> /usr/local/Cellar/hadoop/3.3.1/libexec/bin

<span class="c"># HDFS í¬ë§·</span>
hdfs namenode <span class="nt">-format</span>
<span class="c"># í¬ë§·ì‹œ, /usr/local/Cellar/hadoopì— hdfs ìƒì„±ë¨</span>

<span class="c"># alias ë“±ë¡</span>
<span class="nb">alias </span><span class="nv">hstart</span><span class="o">=</span><span class="s2">"/usr/local/Cellar/hadoop/3.3.1/libexec/sbin/start-all.sh"</span>
<span class="nb">alias </span><span class="nv">hstop</span><span class="o">=</span><span class="s2">"/usr/local/Cellar/hadoop/3.3.1/libexec/sbin/stop-all.sh"</span>
</code></pre></div></div>

<h3 id="hadoop-ì‹¤í–‰">Hadoop ì‹¤í–‰</h3>
<ul>
  <li>Cluster status : http://localhost:8088</li>
  <li>HDFS status : http://localhost:9870</li>
  <li>Secondary NameNode status : http://localhost:9868</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># í•˜ë‘¡ ì‹œì‘</span>
hstart
<span class="c"># ë§Œì•½ "localhost: ssh: connect to host localhost port 22: Connection refused" ë°œìƒì‹œ</span>
<span class="c"># System Preferences - Sharing - Remote Login ì ‘ì†í›„</span>
<span class="c"># 1) Remote Loginì„ onìœ¼ë¡œ ìˆ˜ì •</span>
<span class="c"># 2) Allow full disk access for remote users í´ë¦­</span>

<span class="c"># í™•ì¸</span>
jps 
<span class="c"># NodeManager, NameNode, Jps, DataNode, ResourceManager, SecondaryNameNodeê°€ ì •ìƒì ìœ¼ë¡œ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸</span>

<span class="c"># ì¢…ë£Œ</span>
hstop
</code></pre></div></div>

<h3 id="mapreduce-ì‹¤í–‰">MapReduce ì‹¤í–‰</h3>
<ul>
  <li>localì— wFile01.txt, wFile02.txt ì¤€ë¹„ í›„ í•´ë‹¹ ë””ë ‰í† ë¦¬ì—ì„œ ì§„í–‰</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#-------- </span>
<span class="c"># íŒŒì¼ ì£¼ì…</span>
<span class="c">#--------</span>

<span class="c"># ë””ë ‰í† ë¦¬ ìƒì„±</span>
hadoop fs <span class="nt">-mkdir</span> /input01

<span class="c"># ë””ë ‰í† ë¦¬ í™•ì¸</span>
hadoop fs <span class="nt">-ls</span> /

<span class="c"># íŒŒì¼ ì˜®ê¸°ê¸°</span>
hadoop fs <span class="nt">-put</span> ./wFile01.txt /input01
hadoop fs <span class="nt">-put</span> ./wFile02.txt /input01

<span class="c"># í™•ì¸</span>
hadoop fs <span class="nt">-ls</span> /input01
hadoop fs <span class="nt">-cat</span> /input01/wFile01.txt
hadoop fs <span class="nt">-cat</span> /input01/wFile02.txt

<span class="c"># jar íŒŒì¼ ì•ˆì˜ wordcount í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´, input01 ì•ˆì˜ íŒŒì¼ì— mapreduceì— ì ìš© í›„, output01ë¡œ</span>
hadoop jar /usr/local/Cellar/hadoop/3.3.1/libexec/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.1.jar wordcount /input01 /output01

<span class="c"># í™•ì¸</span>
hadoop fs <span class="nt">-cat</span> /output01/

</code></pre></div></div>

<h3 id="ref">ref</h3>
<ul>
  <li><a href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html">ğŸ”— ê³µì‹ë¬¸ì„œ</a></li>
  <li><a href="https://key4920.github.io/p/mac-osì—-í•˜ë‘¡hadoop-ì„¤ì¹˜/">ğŸ”— ì°¸ê³ 1</a></li>
  <li><a href="https://stackoverflow.com/questions/51808588/run-hadoop-in-the-mac-os">ğŸ”— ì°¸ê³ 2</a></li>
</ul>
:ET