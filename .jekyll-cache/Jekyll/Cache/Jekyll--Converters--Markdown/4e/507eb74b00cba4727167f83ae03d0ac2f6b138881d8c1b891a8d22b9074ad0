I"Î$<hr />
<h3 id="sql-Ã¼bung">SQL Ãœbung</h3>
<ul>
  <li>SQL JOIN ë¬¸ë²• ì •ë¦¬(4)</li>
  <li>Subquery - <code class="language-plaintext highlighter-rouge">WHERE</code> or <code class="language-plaintext highlighter-rouge">HAVING</code>/ <code class="language-plaintext highlighter-rouge">SELECT</code>/ <code class="language-plaintext highlighter-rouge">FROM</code> ì•ˆì— ì¿¼ë¦¬ë¥¼ ì“°ëŠ” ê²ƒ</li>
  <li><code class="language-plaintext highlighter-rouge">ANY</code>/<code class="language-plaintext highlighter-rouge">SOME</code> : í•˜ë‚˜ë¼ë„ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°ê°€ ìˆìœ¼ë©´ ë°˜í™˜</li>
  <li><code class="language-plaintext highlighter-rouge">ALL</code> : ëª¨ë“  ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°ê°€ ìˆìœ¼ë©´ ë°˜í™˜</li>
  <li>SubqueryëŠ” ë…ìì ìœ¼ë¡œë„ ì‹¤í–‰ ê°€ëŠ¥í•œ ë¹„ìƒê´€ ì½”ë“œì™€, ê·¸ë ‡ì§€ ì•Šì€ ìƒê´€ ì½”ë“œë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆìŒ</li>
  <li>ë¹„ìƒê´€ ì½”ë“œì˜ ê²½ìš° ê° Rowì— ëŒ€í•˜ì—¬ Subqueryê°€ ì‹¤í–‰ëœ ê²°ê³¼ë¥¼ ë°˜í™˜</li>
  <li><code class="language-plaintext highlighter-rouge">EXISTS</code> : ì¡´ì¬í•˜ë©´ ë°˜í™˜</li>
  <li><code class="language-plaintext highlighter-rouge">NOT EXISTS</code> : ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë°˜í™˜</li>
</ul>

<hr />

<h3 id="subquery-inside-where-or-having">Subquery (inside WHERE or HAVING)</h3>
<ul>
  <li>ê°€ì¥ ë§ì´ ì‚¬ìš©ë¨</li>
  <li>Select all fields from populations with records of 2015 that are larger than 1.15 times the average life expectancy</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SELECT</span> <span class="o">*</span>
  <span class="n">FROM</span> <span class="n">populations</span>
<span class="n">WHERE</span> <span class="n">year</span> <span class="o">=</span> <span class="s">'2015'</span>
  <span class="n">AND</span> <span class="n">life_expectancy</span> <span class="o">&gt;</span> 
  <span class="p">(</span><span class="n">SELECT</span> <span class="n">AVG</span><span class="p">(</span><span class="n">life_expectancy</span> <span class="o">*</span> <span class="mf">1.15</span><span class="p">)</span>
   <span class="n">FROM</span> <span class="n">populations</span>
   <span class="n">WHERE</span> <span class="n">year</span> <span class="o">=</span> <span class="mi">2015</span><span class="p">);</span>
</code></pre></div></div>
<hr />

<h3 id="subquery-inside-select">Subquery (inside SELECT)</h3>
<ul>
  <li>ì´ ê²½ìš°, <code class="language-plaintext highlighter-rouge">AS</code>ë¡œ alias í•´ì•¼ í•¨!</li>
  <li>GET the country and number of cities per country</li>
  <li>Order the result in descending order of the number and limit the result to 9 countries</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SELECT</span> <span class="n">countries</span><span class="p">.</span><span class="n">name</span> <span class="n">AS</span> <span class="n">country</span><span class="p">,</span> <span class="n">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">AS</span> <span class="n">cities_num</span>
  <span class="n">FROM</span> <span class="n">cities</span>
    <span class="n">INNER</span> <span class="n">JOIN</span> <span class="n">countries</span>
    <span class="n">ON</span> <span class="n">countries</span><span class="p">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">cities</span><span class="p">.</span><span class="n">country_code</span>
<span class="n">GROUP</span> <span class="n">BY</span> <span class="n">country</span>
<span class="n">ORDER</span> <span class="n">BY</span> <span class="n">cities_num</span> <span class="n">DESC</span><span class="p">,</span> <span class="n">country</span>
<span class="n">LIMIT</span> <span class="mi">9</span><span class="p">;</span>


<span class="c1"># ìœ„ ì½”ë“œì™€ ê°™ì€ ì½”ë“œ
</span><span class="n">SELECT</span> <span class="n">countries</span><span class="p">.</span><span class="n">name</span> <span class="n">AS</span> <span class="n">country</span><span class="p">,</span>
  <span class="p">(</span><span class="n">SELECT</span> <span class="n">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
   <span class="n">FROM</span> <span class="n">cities</span>
   <span class="n">WHERE</span> <span class="n">countries</span><span class="p">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">cities</span><span class="p">.</span><span class="n">country_code</span><span class="p">)</span> <span class="n">AS</span> <span class="n">cities_num</span>
<span class="n">FROM</span> <span class="n">countries</span>
<span class="n">ORDER</span> <span class="n">BY</span> <span class="n">cities_num</span> <span class="n">DESC</span><span class="p">,</span> <span class="n">country</span>
<span class="n">LIMIT</span> <span class="mi">9</span><span class="p">;</span>
</code></pre></div></div>
<hr />

<h3 id="subquery-inside-from">Subquery (inside FROM)</h3>
<ul>
  <li>ì´ ê²½ìš°, <code class="language-plaintext highlighter-rouge">AS</code>ë¡œ alias í•´ì•¼ í•¨!</li>
  <li>Get the number of languages spoken for each country, identified by the countryâ€™s local name</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SELECT</span> <span class="n">local_name</span><span class="p">,</span> <span class="n">subquery</span><span class="p">.</span><span class="n">lang_num</span>
  <span class="n">FROM</span> <span class="n">countries</span><span class="p">,</span>
  	<span class="p">(</span><span class="n">SELECT</span> <span class="n">code</span><span class="p">,</span> <span class="n">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">AS</span> <span class="n">lang_num</span>
  	 <span class="n">FROM</span> <span class="n">languages</span>
  	 <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">code</span><span class="p">)</span> <span class="n">AS</span> <span class="n">subquery</span>
  <span class="n">WHERE</span> <span class="n">countries</span><span class="p">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">subquery</span><span class="p">.</span><span class="n">code</span>
<span class="n">ORDER</span> <span class="n">BY</span> <span class="n">lang_num</span> <span class="n">DESC</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h3 id="any--some">ANY &amp; SOME</h3>
<ul>
  <li>ì¹´í…Œê³ ë¦¬ê°€ actionì¸ ì˜í™”ì˜ view_count ê°’ ì¤‘ ë‹¨ í•˜ë‚˜ë¼ë„ í° ì˜í™”ë¥¼ ë¦¬í„´í•˜ë¼</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ 120,1000,3000ì¸ ê²½ìš°, view_countê°€ 120ë³´ë‹¤ í° ì˜í™”ë“¤ì´ ë¦¬í„´ë¨
</span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="n">theater</span>
<span class="n">WHERE</span> <span class="n">view_count</span> <span class="o">&gt;</span> 
<span class="n">SOME</span><span class="p">(</span>
	<span class="n">SELECT</span> <span class="n">view_count</span>
    <span class="n">FROM</span> <span class="n">theater</span>
    <span class="n">WHERE</span> <span class="n">category</span> <span class="o">=</span> <span class="s">'ACTION'</span>
<span class="p">)</span>
</code></pre></div></div>

<hr />

<h3 id="all">ALL</h3>
<ul>
  <li>ì¹´í…Œê³ ë¦¬ê°€ actionì¸ ì˜í™”ì˜ view_count ê°’ë“¤ ëª¨ë‘ë³´ë‹¤ í° ì˜í™”ë¥¼ ë¦¬í„´í•˜ë¼</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ 120,1000,3000ì¸ ê²½ìš°, view_countê°€ 3000ë³´ë‹¤ í° ì˜í™”ë“¤ì´ ë¦¬í„´ë¨
</span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="n">theater</span>
<span class="n">WHERE</span> <span class="n">view_count</span> <span class="o">&gt;</span> 
<span class="n">ALL</span><span class="p">(</span>
	<span class="n">SELECT</span> <span class="n">view_count</span>
    <span class="n">FROM</span> <span class="n">theater</span>
    <span class="n">WHERE</span> <span class="n">category</span> <span class="o">=</span> <span class="s">'ACTION'</span>
<span class="p">)</span>
</code></pre></div></div>

<hr />

<h3 id="ë¹„ìƒê´€--ìƒê´€-subquery">ë¹„ìƒê´€ &amp; ìƒê´€ Subquery</h3>
<ul>
  <li>member í…Œì´ë¸”ì˜ íšŒì› ì¤‘ì—ì„œ ë¦¬ë·°ë¥¼ í•˜ë‚˜ë„ ë‚¨ê¸°ì§€ ì•Šì•„ì„œ review í…Œì´ë¸”ì— ê´€ë ¨ ì •ë³´ê°€ í•˜ë‚˜ë„ ì—†ëŠ” íšŒì›ë“¤ë§Œ ì¡°íšŒí•˜ë¼</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ìƒê´€ Subquery
</span><span class="n">SELECT</span> <span class="o">*</span> 
<span class="n">FROM</span> <span class="n">member</span>
<span class="n">WHERE</span> <span class="n">NOT</span> <span class="n">EXISTS</span> 
<span class="p">(</span> 
  <span class="n">SELECT</span> <span class="o">*</span> 
  <span class="n">FROM</span> <span class="n">review</span> 
  <span class="n">WHERE</span> <span class="n">review</span><span class="p">.</span><span class="n">mem_id</span> <span class="o">=</span> <span class="n">member</span><span class="p">.</span><span class="nb">id</span>
<span class="p">);</span>
</code></pre></div></div>

<hr />

:ET