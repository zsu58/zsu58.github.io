---
title: "[JAVA] MySQL JDBC ì—°ê²° [MAC]"
layout: single
date: '01/12/2021'
toc: true
toc_sticky: true
toc_label: Table of Contents
categories:
  - JAVA
tags:
  - JAVA
  - JDBC
  - MYSQL
---

---
### JAVA - MYSQL JDBC ì—°ê²° [MAC]

---

### JDBC ë‹¤ìš´ë¡œë“œ
* Select Operating System: Platfrom Independent í´ë¦­
* Platform Independent (Architecture Independent), ZIP Archive ë‹¤ìš´ë¡œë“œ
* [ğŸ”— ë‹¤ìš´ë¡œë“œ ë§í¬](https://dev.mysql.com/downloads/connector/j/)

```java
# ì•„ë˜ì˜ ê²½ë¡œë¡œ mysql-connector-java-8.0.27.jar íŒŒì¼ ì˜®ê¸°ê¸°
# /Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home/jre/lib/ext
```
---

### JAVAì— mysql-connector-java-[version].jar ì¶”ê°€
* íŒ¨í‚¤ì§€ë³„ë¡œ ì¶”ê°€í•´ì•¼ í•¨

```java
# 1) íŒ¨í‚¤ì§€ í´ë” ìš°í´ë¦­ - Build Path - Configure Build Path í´ë¦­
# 2) Libraries - Add external JARS í´ë¦­ - mysql-connector-java-[version].jar ì¶”ê°€ - Apply and close
```
---

### JAVAì—ì„œ ì—°ê²° í™•ì¸

```java
import java.sql.*;                                         
import java.io.*;


public class [CLASS_NAME] { // Class ì´ë¦„ ìˆ˜ì •

static String url;

public static void main(String[] args) {

Connection conn = null;
Statement stmt = null;
PreparedStatement pstmt = null;
ResultSet rs = null;

        try{
        Class.forName("com.mysql.cj.jdbc.Driver").newInstance(); 
            conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/[DB]", 
                                               "[ID]", 
                                               "[PASSWORD]"); //URL,UID,PWD        
            if(conn==null){
                System.out.println("ì—°ê²°ì‹¤íŒ¨");
            }else{
                System.out.println("ì—°ê²°ì„±ê³µ");
                }
            }catch(ClassNotFoundException ce){
            ce.printStackTrace();            
        }catch(SQLException se){
            se.printStackTrace();    
        }catch(Exception e){
            e.printStackTrace();
        }finally{
            try{ // ì—°ê²° í•´ì œ
                if(rs!=null){        rs.close();            }
                if(pstmt!=null){    pstmt.close();        }
                if(stmt!=null){    stmt.close();        }
                if(conn!=null){    conn.close();        }
            }catch(SQLException se2){
                se2.printStackTrace();
                }
            }
        }
}
```
---

### JAVA-MYSQL
* JDBC ì—°ê²°ì„ í™œìš©í•´ MySQLì˜ empDB ë°ì´í„°ë² ì´ìŠ¤ dept10 í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ìˆ˜ì •
* ë¶€ì„œìœ„ì¹˜ë¥¼ ë°”ê¿€ ë¶€ì„œë²ˆí˜¸ë¥¼ ì…ë ¥í•´, ì…ë ¥ë°›ì€ ë¶€ì„œë²ˆí˜¸ì˜ ìœ„ì¹˜(loc)ì„ ë°”ê¾¸ì‹œì˜¤

```java
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Scanner;
import java.sql.PreparedStatement;


public class MyConn03 {

	public static void main(String[] args) {
		Connection conn = null;
		
		String jdbcDriver = "com.mysql.cj.jdbc.Driver";
		String jdbcUrl = "jdbc:mysql://localhost:3306/empDB?serverTimezone=UTC";
		String dbUser = "root";
		String dbPwd = "1234";
		
		String sqlSelect = "SELECT * FROM dept10";
		PreparedStatement pstmt = null; // for dynmaic query
		ResultSet rs = null;
		
		int iDeptno = 0; 
		String sLoc = null;
		
		Scanner sc = new Scanner(System.in);
		System.out.println("ë¶€ì„œìœ„ì¹˜ë¥¼ ë°”ê¿€ ë¶€ì„œë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì‹œì˜¤ =>");
		iDeptno = sc.nextInt();
		
		System.out.println(iDeptno + "ë²ˆ ë¶€ì„œë²ˆí˜¸ê°€ ë°”ë€” ìœ„ì¹˜ë¥¼ ì…ë ¥í•˜ì‹œì˜¤ =>");
		sLoc = sc.next();
		
		String sqlUpdate = "UPDATE dept10 \n" + 
							"SET loc = ? \n" + 
							"WHERE (deptno = ?)";
		
		try {
			// 1. JDBC ë“œë¼ì´ë²„ ë¡œë“œ
			Class.forName(jdbcDriver); // Libraryì— ìˆëŠ” "String" ì´ë¦„ì˜ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì™€ë¼
			
			// 2. Database Connection ì—°ê²°
			conn = DriverManager.getConnection(jdbcUrl, dbUser, dbPwd);
			
			System.out.println("Connection ì—°ê²°");
			
			// 3. Statement ìƒì„±
			pstmt = conn.prepareStatement(sqlUpdate);
			
			// 4. SQL ì „ì†¡ (executeQuery(), exectueUpdate()) 
			pstmt.setString(1, sLoc);
			pstmt.setInt(2, iDeptno);
			
			int resultCount = pstmt.executeUpdate(); // ì •ìƒì¸ ê²½ìš° ë³´í†µ ìˆ«ì 1 ë°˜í™˜
			
			// 5. Result set(Sql ê²°ê³¼) ë°›ê¸°
			rs = pstmt.executeQuery(sqlSelect);
				
			if (resultCount > 0) {System.out.println("ë°ì´í„° ì •ìƒì ìœ¼ë¡œ ì¶”ê°€ë¨");} 
			else {System.out.println("ë°ì´í„° ì •ìƒì ìœ¼ë¡œ ì…ë ¥ ì•ˆë¨");}
			
			while(rs.next()) {System.out.printf("%d | %-10s | %-10s \n", rs.getInt(1), rs.getString(2), rs.getString("loc"));}
			
			// 6. Database Connection í•´ì œ
			System.out.println("Connection í•´ì œ");
			pstmt.close();
			conn.close();
			} 
			catch (SQLException e) {
				System.out.println("SQL ì—°ê²° ì•ˆë¨");
				}
			catch (ClassNotFoundException e) {
				System.out.println("ë“œë¼ì´ë²„ ë¡œë“œ ì‹¤íŒ¨");
				}
				
	}

}

```
